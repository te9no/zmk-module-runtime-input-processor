# Copyright (c) 2026 The ZMK Contributors
# SPDX-License-Identifier: MIT

description: |
  Runtime configurable input processor for ZMK.
  Supports runtime configuration of scaling and rotation parameters.

compatible: "zmk,input-processor-runtime"

include: base.yaml

properties:
  processor-label:
    type: string
    required: true
    description: |
      Short label for the input processor (max 8 chars for BLE compatibility).
      Used to identify the processor in runtime configuration.

  type:
    type: int
    default: 0x02  # INPUT_EV_REL
    description: Event type to process

  x-codes:
    type: array
    required: true
    description: X-axis input codes to process

  y-codes:
    type: array
    required: true
    description: Y-axis input codes to process

  scale-multiplier:
    type: int
    default: 1
    description: Initial scaling multiplier

  scale-divisor:
    type: int
    default: 1
    description: Initial scaling divisor

  rotation-degrees:
    type: int
    default: 0
    description: Initial rotation angle in degrees

  track-remainders:
    type: boolean
    description: Track remainders for scaling operations (enabled if present)

  auto-mouse-transparent-behavior:
    type: phandle
    description: |
      Behavior to compare against for transparent detection (typically &trans).
      Used for efficient auto-mouse layer deactivation logic.

  auto-mouse-kp-behavior:
    type: phandle
    description: |
      Behavior to compare against for key press detection (typically &kp).
      Used to identify modifier keys for auto-mouse layer deactivation logic.

  auto-mouse-keep-keycodes:
    type: array
    description: |
      List of modifier keycodes that should not deactivate the auto-mouse layer.
      Typically includes LCTRL, LSHIFT, LALT, LGUI, RCTRL, RSHIFT, RALT, RGUI.

  auto-mouse-enabled:
    type: boolean
    description: If present, auto-mouse layer is enabled by default

  auto-mouse-layer:
    type: int
    default: 0
    description: Default target layer ID for auto-mouse

  auto-mouse-activation-delay-ms:
    type: int
    default: 100
    description: Default delay before activating auto-mouse layer (milliseconds)

  auto-mouse-deactivation-delay-ms:
    type: int
    default: 500
    description: Default delay before deactivating auto-mouse layer after input stops (milliseconds)
